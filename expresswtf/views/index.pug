doctype html
html
  head
    script.
      var result = [];
      var choice;
      var randomName;
      var matchesArray;
    title What the Food!?
    meta(charset='windows-1252')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    style.
      body
      {
      background: url("/images/wtflogo.jpg");
      background-repeat: no-repeat;
      background-size: 550px 320px;
      background-position: 50% 5%;
      }
      #Location
      {
      position:absolute;
      top:50%;
      left:20%;
      width:100px;
      height:15px;
      }
      #ZipCode
      {
      position:absolute;
      top:-199%;
      left:0%;
      width:135px;
      height:15px;
      font:Arial;
      font-size:15px;
      padding:10px;
      border: solid 5px #53b4fd;
      transition:box-shadow 0.3s, border 0.3s;
      }
      #INeed
      {
      position:absolute;
      top:73%;
      left:20%;
      width:100px;
      height:15px;
      }
      #FormCategories
      {
      position:absolute;
      top:85%;
      left:20%;
      font:Arial;
      font-size:12px;
      text-align:center;
      padding:5px;
      border: solid 5px #53b4fd;
      width:146px;
      transition:box-shadow 0.3s, border 0.3s;
      }
      #FeedMe
      {
      position:absolute;
      top:130%;
      left:20%;
      width:90px;
      height:40px;
      font-family:Arial;
      font-size:13px;
      background-color:#F8F8F8;
      padding:5px;
      border:solid 5px #53b4fd;
      cursor:pointer;
      }
      #FeedMe:hover
      {
      background-color:#53b4fd;
      color: white;
      }
      #getResults
      {
      position:absolute;
      top:50%;
      left:40%;
      font-family:Arial;
      font-size:20px;
      }
      #Regenerating
      {
      position:absolute;
      visibility: hidden;
      top:87%;
      left:55%;
      width:90px;
      height:40px;
      font-family:Arial;
      font-size:13px;
      background-color:#F8F8F8;
      padding:5px;
      border:solid 5px #53b4fd;
      cursor:pointer;
      -webkit-transition-duration: 0.4s;
      transition-duration: 0.4s;
      }
      #Regenerating:hover
      {
      background-color:#53b4fd;
      color: white;
      }
      
      #randomRestaurantName
      {
      position:absolute;
      top:50%;
      left:45%;
      font-family:Tahoma;
      font-size:30px;
      }
      #randomRestaurantPhone
      {
      position:absolute;
      top:55%;
      left:45%;
      font-family:Tahoma;
      font-size:21px;
      }
      #randomRestaurantAddress
      {
      position:absolute;
      top:60%;
      left:45%;
      font-family:Tahoma;
      font-size:21px;
      }
      
      
  body
    img#Location(src='/images/location.jpg', alt='Enter Your Location: ', style='width:180px;height:70px;')
    br
    img#INeed(src='/images/ineed.jpg', alt='Choose a category: ', style='width:170px;height:60px;')
    form#FormCategories(name='InventoryList', method='post', action='', enctype='application/json')
      input#ZipCode(type='text', onkeypress='validate(event)', name='ZipCode', placeholder='#####', align='right', required='')
      select#select.bnotes(name='SelBranch', multiple='multiple', size='5')
        option(value='restaurants') All
        option(value='breakfast_brunch') Breakfast
        option(value='coffee') Coffee & Tea
        option(value='tradamerican') American
        option(value='burgers') Burgers
        option(value='italian') Italian
        option(value='Pizza') Pizza
        option(value='Fast Food') Fast Food
        option(value='japanese') Japanese
        option(value='chinese') Chinese
        option(value='mexican') Mexican
        option(value='mediterranean') Mediterranean
        option(value='desserts') Dessert
        option(value='vegan') Vegan
      input#FeedMe.bnotes(type='submit', name='ViewReport', value='Feed Me!', onclick='GetInventory();')
    button#Regenerating(onclick='Regenerate()') Regenerate!

    p#getResults
    p#demo
    h1= title
    p #{messageTest}
    h3=randomPhone
    p #{randomPhone}
    h4=randomAddress
    p #{randomAddress}
    p#randomRestaurantName
    p#randomRestaurantPhone
    p#randomRestaurantAddress

    script(language='JavaScript').
      var testArray=JSON.parse(!{JSON.stringify(matchesArray)});
      var randomIndex = Math.floor(Math.random() * (testArray.length));

      document.getElementById("randomRestaurantName").innerHTML =testArray[randomIndex].name;
      document.getElementById("randomRestaurantPhone").innerHTML =testArray[randomIndex].display_phone;
      document.getElementById("randomRestaurantAddress").innerHTML =testArray[randomIndex].location.address1;


      <!--This function prevents the user from inputting letters as the zipcode-->
      function validate(evt)
      {
      var theEvent = evt || window.event;
      var key = theEvent.keyCode || theEvent.which;
      key = String.fromCharCode( key );
      var regex = /[0-9]|\\./;
      if( !regex.test(key) )
      {
      theEvent.returnValue = false;
      if(theEvent.preventDefault) theEvent.preventDefault();
      }
      }
      
      function GetInventory()
      {
        var InvForm = document.forms.InventoryList;
        var SelBranchVal = "";
        var x = 0;
        var results = [];
        // Get the value of the input field with id="ZipCode"
        results.push(document.getElementById("ZipCode").value);
        if (results[0].length != 5)
        {
          window.alert("Please enter in a valid zip code");
        }
        else
        {
          Regenerating.style.visibility = "visible";
          for (x=0;x<InvForm.SelBranch.length;x++)
          {
            if (InvForm.SelBranch[x].selected)
            {
              results.push(InvForm.SelBranch[x].value);
            }
          }
          result = results;
          document.getElementById("getResults").innerHTML = result;
          Regenerating.style.visibility = "visible";
      }
      }
      
      function Regenerate()
      {
      result.push(" Button pressed");
      document.getElementById("getResults").innerHTML = result;
      }
